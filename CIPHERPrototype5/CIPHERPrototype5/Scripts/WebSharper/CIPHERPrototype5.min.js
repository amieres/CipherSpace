(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD;a=window;b=a.CIPHERSpace=a.CIPHERSpace||{};c=b.Model=b.Model||{};d=c.User=c.User||{};e=c.Client=c.Client||{};f=c.Language=c.Language||{};g=c.Report=c.Report||{};h=c.Dimension=c.Dimension||{};i=c.Cube=c.Cube||{};j=c.ServerOlap=c.ServerOlap||{};k=c.CubeOlap=c.CubeOlap||{};l=c.DimOlap=c.DimOlap||{};m=c.ElemOlap=c.ElemOlap||{};n=c.Connection=c.Connection||{};o=c.Workspace=c.Workspace||{};p=c.ObjectT=c.ObjectT||{};q=c.Password=c.Password||{};r=c.ElemOlapRel=c.ElemOlapRel||{};s=a.Rop=a.Rop||{};t=s.Option=s.Option||{};u=s.Rop=s.Rop||{};v=u.ropBuilder=u.ropBuilder||{};w=s.ARop=s.ARop||{};x=w.Builder=w.Builder||{};y=a.StartupCode$CIPHERPrototype5$Rop=a.StartupCode$CIPHERPrototype5$Rop||{};z=b.Model2=b.Model2||{};A=b.Auth=b.Auth||{};B=A.Token=A.Token||{};C=b.Server=b.Server||{};D=C.callServerBuilder=C.callServerBuilder||{};E=a.StartupCode$CIPHERPrototype5$Server=a.StartupCode$CIPHERPrototype5$Server||{};F=b.R=b.R||{};G=b.ReactDOM=b.ReactDOM||{};H=b.ReactHtml=b.ReactHtml||{};I=b.App=b.App||{};J=I.Dummy=I.Dummy||{};K=I.MailboxState=I.MailboxState||{};L=I.App=I.App||{};M=b.SetNode=b.SetNode||{};N=M.Props=M.Props||{};O=b.Popup=b.Popup||{};P=O.Props=O.Props||{};Q=O.Model=O.Model||{};R=b.Dialog=b.Dialog||{};S=R.Props=R.Props||{};T=R.Model=R.Model||{};U=b.GenForm=b.GenForm||{};V=U.Validation=U.Validation||{};W=U.Props=U.Props||{};X=U.Model=U.Model||{};Y=b.Fields=b.Fields||{};Z=a.StartupCode$CIPHERPrototype5$GenForm=a.StartupCode$CIPHERPrototype5$GenForm||{};_0=b.Entry=b.Entry||{};_1=b.FileTreeNode=b.FileTreeNode||{};_2=_1.Props=_1.Props||{};_3=_1.Model=_1.Model||{};_4=b.FileTree=b.FileTree||{};_5=_4.Props=_4.Props||{};_6=_4.Model=_4.Model||{};_7=b.UploadForm=b.UploadForm||{};_8=_7.Props=_7.Props||{};_9=_7.Model=_7.Model||{};_=a.StartupCode$CIPHERPrototype5$UploadForm=a.StartupCode$CIPHERPrototype5$UploadForm||{};$=b.LoginForm=b.LoginForm||{};ba=$.Model=$.Model||{};bb=a.CIPHERPrototype5_GeneratedPrintf=a.CIPHERPrototype5_GeneratedPrintf||{};bc=a.GeneratedPrintf=a.GeneratedPrintf||{};bd=a.IntelliFactory;be=bd&&bd.Runtime;bf=a.WebSharper;bg=bf&&bf.Unchecked;bh=bf&&bf.Strings;bi=bf&&bf.List;bj=bf&&bf.Enumerator;bk=bf&&bf.Operators;bl=bf&&bf.Seq;bm=bf&&bf.MatchFailureException;bn=bf&&bf.Concurrency;bo=bf&&bf.Slice;bp=bf&&bf.Arrays;bq=bf&&bf.Control;br=bq&&bq.MailboxProcessor;bs=bf&&bf.Html;bt=bs&&bs.Client;bu=bt&&bt.Attr;bv=bt&&bt.Tags;bw=bt&&bt.Operators;bx=bf&&bf.Collections;by=bx&&bx.FSharpSet;bz=bx&&bx.Set;bA=bx&&bx.BalancedTree;bB=bf&&bf.Remoting;bC=bB&&bB.AjaxRemotingProvider;bD=bf&&bf.PrintfHelpers;d=c.User=be.Class({isGuest_:function(){return bg.Equals(new d({$:0,$0:"ef047959-15b4-43dc-b131-39646009a706"}),this);},get_userCode:function(){return this.$0;}},null,d);e=c.Client=be.Class({get_clientCode:function(){return this.$0;}},null,e);f=c.Language=be.Class({get_languageCode:function(){return this.$0;}},null,f);f.get_defaultL=function(){return new f({$:0,$0:"en"});};g=c.Report=be.Class({get_reportId:function(){return this.$0;}},null,g);h=c.Dimension=be.Class({get_dimensionId:function(){return this.$0;}},null,h);i=c.Cube=be.Class({get_cubeId:function(){return this.$0;}},null,i);j=c.ServerOlap=be.Class({get_serverId:function(){return this.$0;}},null,j);k=c.CubeOlap=be.Class({get_name:function(){return this.$0;},get_cubeOlapId:function(){return this.$0.toUpperCase();}},null,k);l=c.DimOlap=be.Class({get_name:function(){return this.$0;},get_dimOlapId:function(){return this.$0.toUpperCase();}},null,l);m=c.ElemOlap=be.Class({get_name:function(){return this.$0;},get_elemOlapId:function(){var bE;bE=this.$0.toLowerCase();return bh.Replace(bE," ","");}},null,m);n=c.Connection=be.Class({get_ConnectionId:function(){return this.$0;}},null,n);o=c.Workspace=be.Class({get_getObject:function(){return new p({$:0,$0:this.$0});}},null,o);p=c.ObjectT=be.Class({get_objectId:function(){return this.$0;}},null,p);q.New=function(bE,bF,bG){return{hash:bE,salt:bF,settings:bG};};r=c.ElemOlapRel=be.Class({AddChild:function(bE){this._children=this._children;},get_GetChildren:function(){return this._children;},get_Elem:function(){return this.elem;}},null,r);r.New=be.Ctor(function(bE){this.elem=bE;this._children=new bi.T({$:0});},r);c.dockerFromText=function(bE){return bE==="DckSingle"?{$:1}:bE==="DckGoldenLayout"?{$:2}:bE==="DckWCDocker"?{$:3}:bE==="DckPhosphor"?{$:4}:bE==="DckDockSpawn"?{$:5}:{$:0};};t.modify=function(bE){var bF,bG,bH;bF=function(bI){return bI==null?null:{$:1,$0:bE(bI.$0)};};bG=(bH=a.id,function(bI){return t.defaultValue(bH,bI);});return function(bI){return bG(bF(bI));};};t.apply=function(bE,bF){var bG;return((bE!=null?bE.$==1:false)?(bF!=null?bF.$==1:false)?(bG=[bF.$0,bE.$0],true):false:false)?{$:1,$0:bG[0](bG[1])}:null;};t.iterFO=function(bE,bF){if(bE!=null?bE.$==1:false)if(bF!=null?bF.$==1:false)bF.$0(bE.$0);};t.iterF=function(bE,bF){if(bF!=null?bF.$==1:false)bF.$0(bE);};t.call=function(bE,bF){return(bF!=null?bF.$==1:false)?{$:1,$0:bF.$0(bE)}:null;};t.defaultValue=function(bE,bF){return(bF!=null?bF.$==1:false)?bF.$0:bE;};v=u.ropBuilder=be.Class({For:function(bE,bF){var bG;bG=this;return this.Using(bj.Get(bE),function(bH){return bG.While(function(){return bH.MoveNext();},bG.Delay(function(){return bF(bH.Current());}));});},While:function(bE,bF){var bG;bG=this;return!bE()?this.Zero():this.Bind(bF(),function(){return bG.While(bE,bF);});},Combine:function(bE,bF){return bE.$==1?bF.$==1?{$:1,$0:bi.append(bE.$0,bF.$0)}:{$:1,$0:bi.append(bE.$0,bF.$1)}:bF.$==1?{$:1,$0:bi.append(bE.$1,bF.$0)}:{$:0,$0:bF.$0,$1:bi.append(bE.$1,bF.$1)};},Delay:function(bE){return bE();},Zero:function(){return u.succeed();},Using:function(bE,bF){return bk.Using(bE,bF);},Bind:function(bE,bF){return(u.bindTry(bF))(bE);},ReturnFrom:a.id,Return:function(bE){return u.succeed(bE);}},null,v);v.New=be.Ctor(function(){},v);u.seqCheck=function(bE){var bF,bG,bH,bI;bF=(bG=function(bJ){return bJ.$==1?true:false;},function(bJ){return bl.exists(bG,bJ);}(bE));return bF?{$:1,$0:(bH=function(bJ){return bJ.$==1?{$:1,$0:bJ.$0}:null;},function(bJ){return bl.pick(bH,bJ);}(bE))}:u.succeed((bI=function(bJ){if(bJ.$==0)return bJ.$0;else throw new bm.New("Rop.fs",217,69);},function(bJ){return bl.map(bI,bJ);}(bE)));};u.messagesDo=function(bE,bF){return bF.$==1?bE(true,bF.$0):bE(false,bF.$1);};u.notifyMessages=function(bE){if(bE.$==1)u.processMessages("E",bE.$0);else u.processMessages("N",bE.$1);};u.processMessages=function(bE,bF){var bG;bG=function(bH){var bI,bJ;bI=bE+": "+(bJ=function(bK,bL){return bK(bb.p(bL));},(function(bK){return function(bL){return bJ(bK,bL);};}(a.id))(bH));a.alert(bI);a.console.log(bH);};(function(bH){bi.iter(bG,bH);}(bF));};u.ifError=function(bE,bF){return bF.$==0?bF.$0:bE;};u.assertR=function(bE,bF){return bE?u.succeed():u.fail(bF);};u.tryProtection=function(){return u.succeed();};u.toOption=function(bE){return bE.$==0?{$:1,$0:bE.$0}:null;};u.fromOption=function(bE,bF){return(bF!=null?bF.$==1:false)?u.succeed(bF.$0):u.fail(bE);};u.fromChoice=function(bE,bF){return bF.$==1?u.fail({$:1,$0:bF.$0}):u.succeed(bF.$0);};u.flow=function(){y.$cctor();return y.flow;};u.liftTry=function(bE){var bF;bF=u.callTry(bE);return function(bG){return u.bindR(bF,bG);};};u.bindTry=function(bE){var bF;bF=function(bG){return u.doTry(bE,bG);};return function(bG){return u.bindR(bF,bG);};};u.callTry=function(bE){var bF;bF=function(bG){return u.succeed(bE(bG));};return function(bG){return u.doTry(bF,bG);};};u.doTry=function(bE,bF){try{return bE(bF);}catch(bG){return u.failException(bG);}};u.failException=function(bE){return u.fail({$:1,$0:a.String(bE)});};u.failIfNoneR=function(bE,bF){return bF==null?u.fail(bE):bF.$0;};u.failIfNone=function(bE,bF){return bF==null?u.fail(bE):u.succeed(bF.$0);};u.valueOrDefault=function(bE,bF){return bF.$==1?bE(bF.$0):bF.$0;};u.mapMessagesR=function(bE,bF){return bF.$==1?{$:1,$0:bi.map(bE,bF.$0)}:{$:0,$0:bF.$0,$1:bi.map(bE,bF.$1)};};u.failureTee=function(bE,bF){return u.either(function(bG,bH){return{$:0,$0:bG,$1:bH};},function(bG){return u.fFailure2(bE,bG);},bF);};u.fFailure2=function(bE,bF){bE(bF);return{$:1,$0:bF};};u.successTee=function(bE,bF){return u.either(function(bG,bH){bE(bG,bH);return{$:0,$0:bG,$1:bH};},function(bG){return{$:1,$0:bG};},bF);};u.mapR=function(bE){return function(bF){return u.liftR(bE,bF);};};u.op_LessBangGreater=function(){y.$cctor();return y.op_LessBangGreater;};u.lift4R=function(bE,bF,bG,bH,bI){var bJ;bJ=u.lift3R(bE,bF,bG,bH);return u.applyR(bJ,bI);};u.lift3R=function(bE,bF,bG,bH){var bI;bI=u.lift2R(bE,bF,bG);return u.applyR(bI,bH);};u.lift2R=function(bE,bF,bG){var bH;bH=u.liftR(bE,bF);return u.applyR(bH,bG);};u.liftR=function(bE,bF){var bG;bG=u.succeed(bE);return u.applyR(bG,bF);};u.op_LessMultiplyGreater=function(){y.$cctor();return y.op_LessMultiplyGreater;};u.applyR=function(bE,bF){var bG,bH;switch(bE.$==1?bF.$==1?(bG=[bE.$0,bF.$0],2):(bG=[bE.$0,bF.$1],1):bF.$==1?(bG=[bF.$0,bE.$1],1):(bG=[bE.$0,bE.$1,bF.$1,bF.$0],0)){case 0:bH=bG[0](bG[3]);return{$:0,$0:bH,$1:bi.append(bG[1],bG[2])};break;case 1:return{$:1,$0:bi.append(bG[0],bG[1])};break;case 2:return{$:1,$0:bi.append(bG[0],bG[1])};break;}};u.bindR=function(bE,bF){return u.either(function(bG,bH){return u.fSuccess1(bE,bG,bH);},function(bG){return{$:1,$0:bG};},bF);};u.fSuccess1=function(bE,bF,bG){var bH;bH=bE(bF);return u.mergeMessages(bG,bH);};u.mergeMessages=function(bE,bF){return u.either(function(bG,bH){return u.fSuccess0(bE,bG,bH);},function(bG){return u.fFailure1(bE,bG);},bF);};u.fFailure1=function(bE,bF){return{$:1,$0:bi.append(bF,bE)};};u.fSuccess0=function(bE,bF,bG){return{$:0,$0:bF,$1:bi.append(bE,bG)};};u.either=function(bE,bF,bG){return bG.$==1?bF(bG.$0):bE(bG.$0,bG.$1);};u.fail=function(bE){return{$:1,$0:bi.ofArray([bE])};};u.succeedWithMsg=function(bE,bF){return{$:0,$0:bE,$1:bi.ofArray([bF])};};u.succeed=function(bE){return{$:0,$0:bE,$1:new bi.T({$:0})};};x=w.Builder=be.Class({Delay:function(bE){return bE();},Return:function(bE){return{$:3,$0:bE};},Zero:function(){return{$:3,$0:null};},Bind:function(bE,bF){return w.bind(bF,{$:4,$0:bE});},Bind$1:function(bE,bF){return w.bind(bF,{$:0,$0:bE});},Bind$2:function(bE,bF){return w.bind(bF,{$:2,$0:bE});},Bind$3:function(bE,bF){return w.bind(bF,bE);}},null,x);x.New=be.Ctor(function(){},x);w.call=function(bE){var bF;bF=function(bG){u.notifyMessages(bG);};(function(bG){w.getR(bF,bG);}(bE));};w.getR=function(bE,bF){if(bF.$==4){if(bF.$0==null)bE(u.fail({$:30}));else bE(u.succeed(bF.$0.$0));}else if(bF.$==0)bE(bF.$0);else if(bF.$==1)bn.StartWithContinuations(bF.$0,function(bG){bE(u.succeed(bG));},function(bG){bE(u.failException(bG));},function(bG){bE(u.failException(bG));},null);else if(bF.$==2)bn.StartWithContinuations(bF.$0,bE,function(bG){bE(u.failException(bG));},function(bG){bE(u.failException(bG));},null);else bE(u.succeed(bF.$0));};w.wrap=function(){y.$cctor();return y.wrap;};w.bind=function(bE,bF){var bG,bH,bI,bJ,bK;switch(bF.$==4?bF.$0==null?1:(bG=bF.$0.$0,0):bF.$==0?bF.$0.$==1?(bG=bF.$0.$0,2):bF.$0.$1.$==0?(bG=bF.$0.$0,0):(bG=[bF.$0.$0,bF.$0.$1],3):bF.$==1?(bG=bF.$0,4):bF.$==2?(bG=bF.$0,5):(bG=bF.$0,0)){case 0:return bE(bG);break;case 1:return{$:4,$0:null};break;case 2:return{$:0,$0:{$:1,$0:bG}};break;case 3:bJ=bG[1];bK=bE(bG[0]);switch(bK.$==3?(bI=bK.$0,0):bK.$==0?bK.$0.$==1?(bI=bK.$0.$0,2):bK.$0.$1.$==0?(bI=bK.$0.$0,0):(bI=[bK.$0.$0,bK.$0.$1],1):bK.$==1?(bI=bK.$0,3):bK.$==2?(bI=bK.$0,4):5){case 0:bH={$:0,$0:{$:0,$0:bI,$1:bJ}};break;case 1:bH={$:0,$0:{$:0,$0:bI[0],$1:bi.append(bJ,bI[1])}};break;case 2:bH={$:0,$0:{$:1,$0:bi.append(bJ,bI)}};break;case 3:bH={$:2,$0:bn.Delay(function(){return bn.Bind(bI,function(bL){return bn.Return({$:0,$0:bL,$1:bJ});});})};break;case 4:bH={$:2,$0:bn.Delay(function(){return bn.Bind(bI,function(bL){return bn.Return(u.mergeMessages(bJ,bL));});})};break;case 5:throw new bm.New("Rop.fs",246,43);bH=void 0;break;}return bH;break;case 4:return{$:2,$0:bn.Delay(function(){return bn.Bind(bG,function(bL){var bM,bN;bM=bE(bL);bN=new bi.T({$:0});return w.wb2arb(bN,bM);});})};break;case 5:return{$:2,$0:bn.Delay(function(){return bn.Bind(bG,function(bL){var bM,bN;return bL.$==1?(bM=bL.$0,bn.Delay(function(){return bn.Return({$:1,$0:bM});})):(bN=bE(bL.$0),w.wb2arb(bL.$1,bN));});})};break;}};w.wb2arb=function(bE,bF){var bG,bH,bI,bJ,bK;return bF.$==2?(bG=bF.$0,bn.Delay(function(){return bn.Bind(bG,function(bL){return bn.Return(u.mergeMessages(bE,bL));});})):bF.$==0?(bH=bF.$0,bn.Delay(function(){return bn.Return(u.mergeMessages(bE,bH));})):bF.$==3?(bI=bF.$0,bn.Delay(function(){return bn.Return({$:0,$0:bI,$1:bE});})):bF.$==4?bF.$0==null?bn.Delay(function(){return bn.Return({$:1,$0:new bi.T({$:1,$0:{$:30},$1:bE})});}):(bJ=bF.$0.$0,bn.Delay(function(){return bn.Return({$:0,$0:bJ,$1:bE});})):(bK=bF.$0,bn.Delay(function(){return bn.Bind(bK,function(bL){return bn.Return({$:0,$0:bL,$1:bE});});}));};y.$cctor=be.Cctor(function(){y.op_LessMultiplyGreater=function(bE){return function(bF){return u.applyR(bE,bF);};};y.op_LessBangGreater=function(bE){return function(bF){return u.liftR(bE,bF);};};y.flow=new v.New();y.wrap=new x.New();y.$cctor=a.ignore;});z.sortOrder=function(bE,bF){return(bE!=null?bE.$==1:false)?bh.Trim(bE.$0)!==""?bh.Trim(bE.$0):bF:bF;};z.left=function(bE,bF){return bF.length<=bE?bF:bo.string(bF,{$:1,$0:0},{$:1,$0:bE-1});};z.strToKey=function(bE){var bF;bF=bE.toLowerCase();return bh.Replace(bF," ","");};z.callF=function(bE,bF,bG){return be.CreateFuncWithArgs(bE).apply(null,[bF,bG]);};B.New=function(bE,bF){return{Name:bE,Hash:bF};};D=C.callServerBuilder=be.Class({Combine:function(bE,bF){return bE.$==1?bF.$==1?{$:1,$0:bi.append(bE.$0,bF.$0)}:{$:1,$0:bi.append(bE.$0,bF.$1)}:bF.$==1?{$:1,$0:bi.append(bE.$1,bF.$0)}:{$:0,$0:bF.$0,$1:bi.append(bE.$1,bF.$1)};},Delay:function(bE){return bE();},Return:function(bE){return u.succeed(bE);},Zero:function(){},Bind:function(bE,bF){this.handleErrors((u.liftTry(bF))(bE));},Bind$1:function(bE,bF){C.callServerDo(bE,bF,this.handleErrors);}},null,D);D.New=be.Ctor(function(bE){this.handleErrors=bE;},D);C.callR=function(bE){return new D.New(bE);};C.call=function(){E.$cctor();return E.call;};C.callServerDo=function(bE,bF,bG){var bH;bH=bn.Delay(function(){return bn.Bind(bE,function(bI){var bJ;bG((bJ=u.flow(),bJ.Delay(function(){return bJ.Bind(u.tryProtection(),function(){return bJ.Bind(bI,function(bK){bF(bK);return bJ.Zero();});});})));return bn.Return(null);});});bn.StartWithContinuations(bH,function(){},function(bI){u.notifyMessages(u.failException(bI));},function(bI){u.notifyMessages(u.failException(bI));},null);};E.$cctor=be.Cctor(function(){E.call=new D.New(function(bE){u.notifyMessages(bE);});E.$cctor=a.ignore;});F=b.R=be.Class({},null,F);F.E00=function(bE,bF,bG){var bH,bI,bJ,bK,bL;bH=(bI=bp.length(bF)===0,bI?{}:(bJ=function(bM,bN){return a.$.extend(true,{},bM,bN);},function(bM){return bp.reduce(bJ,bM);}(bF)));bK=(bL=[bE,bH],function(bM){return bL.concat(bM);}(bG));return a.React.createElement.apply(null,bK);};F.E0=function(bE,bF,bG){var bH,bI,bJ,bK;bH=bF.$==0?{}:(bI=function(bL,bM){return a.$.extend(true,{},bL,bM);},function(bL){return bl.reduce(bI,bL);}(bF));bJ=new bi.T({$:1,$0:bE,$1:new bi.T({$:1,$0:bH,$1:bi.ofSeq(bG)})});return bJ.$==0?a.React.createElement.apply(null,[bE,bH]):(bK=bp.ofList(bJ),a.React.createElement.apply(null,bK));};F.New=be.Ctor(function(){},F);G=b.ReactDOM=be.Class({},null,G);G.New=be.Ctor(function(){},G);H.reactContainerClass=function(bE,bF){var bG,bH;bG=(bH={},bH.displayName="containerClass",bH.componentDidMount=function(){bF(this,a.ReactDOM.findDOMNode(this));},bH.shouldComponentUpdate=function(){return false;},bH.render=function(){return H.toReact(H.Div([H.Class(bE)]));},bH);return a.React.createClass(bG);};H.toIncrementalDom=function(bE){var bF;function bG(bH){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR;switch(bH.$==1?1:bH.$==6?2:bH.$==7?3:bH.$==4?4:bH.$==5?4:bH.$==2?4:bH.$==3?4:bH.$==8?4:0){case 0:bJ=bH.$0;bK=bH.$1;bL=(bM=[],function(bS){return H.elementOpen(bJ,null,bM,bS);}((bN=(bO=bp.collect(bF,bK),bp.length(bO)===0?{}:(bP=function(bS,bT){return a.$.extend(true,{},bS,bT);},function(bS){return bl.reduce(bP,bS);}(bO))),bQ=function(bS){return[bS==="className"?"class":bh.StartsWith(bS,"on")?bS.toLowerCase():bS,bN[bS]];},function(bS){return bp.collect(bQ,bS);}(a.Object.keys(bN)))));bR=bp.map(bG,bK);return H.elementClose(bJ);break;case 1:return H.textIDom(bH.$0);break;case 2:return bG(bH.$0.CIPHERSpace_ReactHtml_IUIObject$view());break;case 3:return bH.$0.CIPHERSpace_ReactHtml_IUIApp$nodeIncDom(bH.$1);break;case 4:return null;break;}}bF=function(bH){var bI;switch(bH.$==3?1:bH.$==0?2:bH.$==1?2:bH.$==4?2:bH.$==5?2:bH.$==6?2:bH.$==7?2:bH.$==8?2:0){case 0:return[H.newAttr(bH.$0,bH.$1)];break;case 1:return bH.$0;break;case 2:return[];break;}};return bG(bE);};H.textIDom=function(bE){var bF;bF=a.window.IncrementalDOM;return bF.text.apply(bF,[bE]);};H.elementClose=function(bE){var bF;bF=a.window.IncrementalDOM;return bF.elementClose.apply(bF,[bE]);};H.elementOpen=function(bE,bF,bG,bH){var bI;bI=a.window.IncrementalDOM;return bI.elementOpen.apply(bI,[bE,bF,bG].concat(bH));};H.patchInner=function(bE,bF){var bG;bG=a.window.IncrementalDOM;bG.patchInner.apply(bG,[bE,bF]);};H.patchOuter=function(bE,bF){var bG;bG=a.window.IncrementalDOM;bG.patchOuter.apply(bG,[bE,bF]);};H.toReact=function(bE){var bF,bG;function bH(bI){var bJ,bK,bL,bM;switch(bI.$==1?1:bI.$==4?2:bI.$==5?3:bI.$==6?4:bI.$==7?5:bI.$==8?6:bI.$==2?7:bI.$==3?7:0){case 0:bK=bI.$1;bL=bp.choose(bH,bK);bM=bp.collect(bF,bK);return{$:1,$0:F.E00(bI.$0,bM,bL)};break;case 1:return{$:1,$0:bI.$0};break;case 2:return{$:1,$0:bI.$0};break;case 3:return{$:1,$0:a.React.createElement.apply(null,[bI.$0])};break;case 4:return bH(bI.$0.CIPHERSpace_ReactHtml_IUIObject$view());break;case 5:return{$:1,$0:bI.$0.CIPHERSpace_ReactHtml_IUIApp$nodeR(bI.$1)};break;case 6:return{$:1,$0:null};break;case 7:return null;break;}}bF=function(bI){var bJ;switch(bI.$==3?1:bI.$==0?2:bI.$==1?2:bI.$==4?2:bI.$==5?2:bI.$==6?2:bI.$==7?2:bI.$==8?2:0){case 0:return[H.newAttr(bI.$0,bI.$1)];break;case 1:return bI.$0;break;case 2:return[];break;}};bG=bH(bE);return t.defaultValue(null,bG);};H.__outerHtml=function(bE){var bF,bG;bF={$:8};return function(bH){return u.ifError(bF,bH);}((bG=u.flow(),bG.Delay(function(){return bG.Bind(u.tryProtection(),function(){var bH,bI,bJ,bK,bL,bM,bN,bO,bP;bH=bE.indexOf(a.String.fromCharCode(62));return bG.Return(bH>0?(bI=a.document.createElement("div"),(bI.innerHTML=bE,bJ=bI.firstElementChild,bK=(bL=(bM=function(bQ){return H.outerAttrs(bQ.name,bQ.value);},function(bQ){return bl.map(bM,bQ);}((bN=function(bQ){return bJ.attributes.item(bQ);},function(bQ){return bl.map(bN,bQ);}(bi.ofSeq(bk.range(0,bJ.attributes.length-1)))))),(bO=bi.ofArray([H.__innerHtml(bJ.innerHTML)]),bl.append(bO,bL))),bP=bJ.localName,H.NewTag(bP,bK))):{$:8});});})));};H.outerAttrs=function(bE,bF){return bE==="class"?H.NewAttr("className",bF):H.NewAttr(bE,bF);};H.__innerHtml=function(bE){return{$:2,$0:"dangerouslySetInnerHTML",$1:{__html:bE}};};H._Style=function(bE){var bF;return H.Style((bF=function(bG,bH){var bI;bI=a.jQuery.extend.apply(a.jQuery,[{}].concat([bG]));return a.jQuery.extend.apply(a.jQuery,[bI].concat([bH]));},function(bG){return bl.reduce(bF,bG);}(bE)));};H._border=function(bE){return H.newAttr("border",bE);};H._textAlign=function(bE){return H.newAttr("textAlign",bE);};H._textOverflow=function(bE){return H.newAttr("textOverflow",bE);};H._whiteSpace=function(bE){return H.newAttr("whiteSpace",bE);};H._fontFamily=function(bE){return H.newAttr("fontFamily",bE);};H._background=function(bE){return H.newAttr("background",bE);};H._overflow=function(bE){return H.newAttr("overflow",bE);};H._marginBottom=function(bE){return H.newAttr("marginBottom",bE);};H._borderWidth=function(bE){return H.newAttr("borderWidth",bE);};H._borderStyle=function(bE){return H.newAttr("borderStyle",bE);};H._paddingBottom=function(bE){return H.newAttr("paddingBottom",bE);};H._paddingTop=function(bE){return H.newAttr("paddingTop",bE);};H._paddingRight=function(bE){return H.newAttr("paddingRight",bE);};H._paddingLeft=function(bE){return H.newAttr("paddingLeft",bE);};H._padding=function(bE){return H.newAttr("padding",bE);};H._flexShrink=function(bE){return H.newAttr("flexShrink",bE);};H._flexGrow=function(bE){return H.newAttr("flexGrow",bE);};H._flexBasis=function(bE){return H.newAttr("flexBasis",bE);};H._flex=function(bE){return H.newAttr("flex",bE);};H._flexFlow=function(bE){return H.newAttr("flexFlow",bE);};H._display=function(bE){return H.newAttr("display",bE);};H._position=function(bE){return H.newAttr("position",bE);};H._zIndex=function(bE){return H.newAttr("zIndex",bE);};H._maxWidth=function(bE){return H.newAttr("maxWidth",bE);};H._minWidth=function(bE){return H.newAttr("minWidth",bE);};H._width=function(bE){return H.newAttr("width",bE);};H._maxHeight=function(bE){return H.newAttr("maxHeight",bE);};H._minHeight=function(bE){return H.newAttr("minHeight",bE);};H._height=function(bE){return H.newAttr("height",bE);};H._right=function(bE){return H.newAttr("right",bE);};H._left=function(bE){return H.newAttr("left",bE);};H._bottom=function(bE){return H.newAttr("bottom",bE);};H._top=function(bE){return H.newAttr("top",bE);};H._alignSelf=function(bE){return H.newAttr("alignSelf",bE);};H._fontWeight=function(bE){return H.newAttr("fontWeight",bE);};H._fontStyle=function(bE){return H.newAttr("fontStyle",bE);};H._fontSize=function(bE){return H.newAttr("fontSize",bE);};H._margin=function(bE){return H.newAttr("margin",bE);};H._cursor=function(bE){return H.newAttr("cursor",bE);};H._color=function(bE){return H.newAttr("color",bE);};H.newAttr=function(bE,bF){var bG;bG={};bG[bE]=bF;return bG;};H.OnAfterRender=function(bE){return H.Ref(function(bF){if(!(!bF))bE(bF);});};H.Ref=function(bE){return(H.addAttribute())({$:2,$0:"ref",$1:bE});};H.OnKeyDown=function(bE){return(H.addAttribute())({$:2,$0:"onKeyDown",$1:bE});};H.OnDragOver=function(bE){return(H.addAttribute())({$:2,$0:"onDragOver",$1:bE});};H.OnDragStart=function(bE){return(H.addAttribute())({$:2,$0:"onDragStart",$1:bE});};H.OnDrop=function(bE){return(H.addAttribute())({$:2,$0:"onDrop",$1:bE});};H.OnMouseUp=function(bE){return(H.addAttribute())({$:2,$0:"onMouseUp",$1:bE});};H.OnMouseMove=function(bE){return(H.addAttribute())({$:2,$0:"onMouseMove",$1:bE});};H.OnMouseDown=function(bE){return(H.addAttribute())({$:2,$0:"onMouseDown",$1:bE});};H.OnMouseOut=function(bE){return(H.addAttribute())({$:2,$0:"onMouseOut",$1:bE});};H.OnMouseOver=function(bE){return(H.addAttribute())({$:2,$0:"onMouseOver",$1:bE});};H.OnMouseLeave=function(bE){return(H.addAttribute())({$:2,$0:"onMouseLeave",$1:bE});};H.OnMouseEnter=function(bE){return(H.addAttribute())({$:2,$0:"onMouseEnter",$1:bE});};H.OnChange=function(bE){return(H.addAttribute())({$:2,$0:"onChange",$1:bE});};H.OnSubmit=function(bE){return(H.addAttribute())({$:2,$0:"onSubmit",$1:bE});};H.OnClick=function(bE){return(H.addAttribute())({$:2,$0:"onClick",$1:bE});};H.Draggable=function(bE){return{$:2,$0:"draggable",$1:bE};};H.Checked=function(bE){return{$:2,$0:"checked",$1:bE};};H.MaxLength=function(bE){return{$:2,$0:"maxLength",$1:bE};};H.Placeholder=function(bE){return{$:2,$0:"placeholder",$1:bE};};H.Disabled=function(bE){return{$:2,$0:"disabled",$1:bE};};H.AutoFocus=function(bE){return{$:2,$0:"autoFocus",$1:bE};};H.TabIndex=function(bE){return{$:2,$0:"tabIndex",$1:bE};};H.Value=function(bE){return{$:2,$0:"value",$1:bE};};H.Type=function(bE){return{$:2,$0:"type",$1:bE};};H.Class=function(bE){return{$:2,$0:"className",$1:bE};};H.Style=function(bE){return{$:2,$0:"style",$1:bE};};H.Href=function(bE){return{$:2,$0:"href",$1:bE};};H.Src=function(bE){return{$:2,$0:"src",$1:bE};};H.Role=function(bE){return{$:2,$0:"role",$1:bE};};H.Key=function(bE){return{$:2,$0:"key",$1:bE};};H.Id=function(bE){return{$:2,$0:"id",$1:bE};};H.NewAttr=function(bE,bF){return{$:2,$0:bE,$1:bF};};H.NewTag=function(bE,bF){return H.NElement(bE,bF);};H.Button=function(bE){return H.NElement("button",bE);};H.OptionA=function(bE){return H.NElement("option",bE);};H.Select=function(bE){return H.NElement("select",bE);};H.Input=function(bE){return H.NElement("input",bE);};H.Label=function(bE){return H.NElement("label",bE);};H.B=function(bE){return H.NElement("b",bE);};H.A=function(bE){return H.NElement("a",bE);};H.P=function(bE){return H.NElement("p",bE);};H.Td=function(bE){return H.NElement("td",bE);};H.Tr=function(bE){return H.NElement("tr",bE);};H.TBody=function(bE){return H.NElement("tbody",bE);};H.Th=function(bE){return H.NElement("th",bE);};H.THead=function(bE){return H.NElement("thead",bE);};H.Table=function(bE){return H.NElement("table",bE);};H.Br=function(bE){return H.NElement("br",bE);};H.Hr=function(bE){return H.NElement("hr",bE);};H.H6=function(bE){return H.NElement("h6",bE);};H.H5=function(bE){return H.NElement("h5",bE);};H.H4=function(bE){return H.NElement("h4",bE);};H.H3=function(bE){return H.NElement("h3",bE);};H.H2=function(bE){return H.NElement("h2",bE);};H.H1=function(bE){return H.NElement("h1",bE);};H.Li=function(bE){return H.NElement("li",bE);};H.Ul=function(bE){return H.NElement("ul",bE);};H.Img=function(bE){return H.NElement("img",bE);};H.Form=function(bE){return H.NElement("form",bE);};H.Menu=function(bE){return H.NElement("menu",bE);};H.Span=function(bE){return H.NElement("span",bE);};H.Div=function(bE){return H.NElement("div",bE);};H.addAttribute=function(){Z.$cctor();return Z.addAttribute;};H.addAttributes=function(){Z.$cctor();return Z.addAttributes;};H.addChild=function(bE){var bF;bF=bi.ofArray([bE]);return function(bG){return H.addChildren(bF,bG);};};H.addChildren=function(bE,bF){return bF.$==1?H.NElement("div",bl.append([bF],bE)):bF.$==2?H.NElement("div",bl.append([bF],bE)):bF.$==3?H.NElement("div",bl.append([bF],bE)):bF.$==4?bF:bF.$==5?bF:bF.$==6?bF:bF.$==7?bF:bF.$==8?H.NElement("div",bE):H.NElement(bF.$0,bl.append(bF.$1,bE));};H.insertChildren=function(bE,bF){return bF.$==1?H.NElement("div",bl.append(bE,[bF])):bF.$==2?H.NElement("div",bl.append(bE,[bF])):bF.$==3?H.NElement("div",bl.append(bE,[bF])):bF.$==4?bF:bF.$==5?bF:bF.$==6?bF:bF.$==7?bF:bF.$==8?H.NElement("div",bE):H.NElement(bF.$0,bl.append(bE,bF.$1));};H.NElement=function(bE,bF){return{$:0,$0:bE,$1:bp.ofSeq(bF)};};J.New=function(bE){return{dummy:bE};};K=I.MailboxState=be.Class({setLatest:function(bE){this.latestModel=bE;this.get_latest().__ref=this;},get_latest:function(){return this.latestModel;}},null,K);K.New=function(bE,bF,bG){return new K({agent:bE,count:bF,latestModel:bG});};L=I.App=be.Class({renderNodeIncDom:function(bE){var bF,bG,bH;function bI(){H.patchOuter(bH.element,function(){var bK;bK=H.toIncrementalDom(bJ());});}function bJ(){return((bF.view(bE))(bH.get_latest()))(function(bK){bF.processMessages_(bE,bH,bI,bK);});}bF=this;bG=H.textIDom("");!bG.state?bG.state=I.mailbox(this.init,null):void 0;bH=bG.state;bH.element=H.toIncrementalDom(bJ());return bH.element;},renderIncDom:function(bE,bF){var bG,bH,bI,bJ;bG=this;!bF.state?bF.state=I.mailbox(this.init,null):void 0;bH=bF.state;bI=function(){bG.renderIncDom(bE,bF);};bJ=((this.view(bE))(bH.get_latest()))(function(bK){bG.processMessages_(bE,bH,bI,bK);});H.patchInner(bF,function(){var bK;bK=H.toIncrementalDom(bJ);});},renderReact:function(bE){var bF,bG,bH,bI,bJ;bF=this;bG=bE.forceUpdate;bH=function(){var bK;bK=bG.apply(bE,[]);};bI=bE.state;bJ=bE.props;return H.toReact(((this.view(bJ))(bI.get_latest()))(function(bK){bF.processMessages_(bJ,bI,bH,bK);}));},processMessages_:function(bE,bF,bG,bH){var bI,bJ,bK,bL;bI=this;bJ=bF.agent;bL=bJ.mailbox.AddLast((bK=(this.update(function(bM){bI.processMessages_(bE,bF,bG,bM);}))(bE),function(bM){return bI.doMsg(bF,function(bN,bO){return(bK(bN))(bO);},bH,bG,bM);}));bJ.resume();},doMsg:function(bE,bF,bG,bH,bI){var bJ,bK,bL;bJ=(bK=bF(bG,bI),bK.$==1?[bK.$0,false]:bK.$==2?[bI,false]:[bK.$0,true]);bL=bJ[0];bE.setLatest(bL);bJ[1]?bH():void 0;return bL;},run:function(bE,bF){if(!a.window.IncrementalDOM)this.runReact(bE,bF);else this.runIncDom(bE,bF);},runReact:function(bE,bF){var bG;bG=this.nodeR(bE);a.ReactDOM.render(bG,bF);},runIncDom:function(bE,bF){this.renderIncDom(bE,bF);},node:function(bE){return{$:7,$0:this,$1:bE};},nodeIncDom:function(bE){return this.renderNodeIncDom(bE);},nodeR:function(bE){return a.React.createElement.apply(null,[this.reactClass,bE]);},get_view:function(){return this.view;},get_update:function(){return this.update;},get_init:function(){return this.init;},CIPHERSpace_ReactHtml_IUIApp$run:function(bE,bF){this.run(bE,bF);},CIPHERSpace_ReactHtml_IUIApp$nodeIncDom:function(bE){return this.nodeIncDom(bE);},CIPHERSpace_ReactHtml_IUIApp$nodeR:function(bE){return this.nodeR(bE);}},null,L);L.New=be.Ctor(function(bE,bF,bG){L.New$2.call(this,bE,be.Curried(function(bH,bI,bJ,bK){return{$:0,$0:bF(bJ,bK)};},4),bG);},L);L.New$1=be.Ctor(function(bE,bF,bG){L.New$2.call(this,bE,be.Curried(function(bH,bI,bJ,bK){return{$:0,$0:bF(bI,bJ,bK)};},4),bG);},L);L.New$2=be.Ctor(function(bE,bF,bG){var bH,bI;bH=this;this.init=bE;this.update=bF;this.view=bG;this.reactClass=a.React.createClass({displayName:"rootClass",getInitialState:(bI=this.init,function(){return I.mailbox(bI,void 0);}),render:function(){return bH.renderReact(this);}});},L);I.mailbox=function(bE,bF){var bG,bH,bI;I.set_mailboxes(I.mailboxes()+1);bG=K.New(br.Start(function(bJ){function bK(bL){return bn.Delay(function(){var bM;bM=bJ.Receive(null);return bn.Bind(bM,function(bN){return bK(bN(bL));});});}return bK(a.jQuery.extend.apply(a.jQuery,["object"].concat([bE])));},null),I.mailboxes(),bE);bH=bG.agent;bI=bH.mailbox.AddLast(function(bJ){bG.setLatest(bJ);return bJ;});bH.resume();return bG;};I.mailboxes=function(){Z.$cctor();return Z.mailboxes;};I.set_mailboxes=function(bE){Z.$cctor();Z.mailboxes=bE;};I.withContainerDo=function(bE,bF){var bG,bH,bI;bG=(bH=[bu.Attr().NewAttr("class",bE)],bv.Tags().NewTag("div",bH));bI=function(bJ){bF(bJ);};(function(bJ){bw.OnAfterRender(bI,bJ);}(bG));return bG;};I.DummyNew=function(){Z.$cctor();return Z.DummyNew;};N.New=function(bE,bF){return{node:bE,attributes:bF};};M.run=function(bE,bF){M.app().run(N.New(bE,[]),bF);};M.app=function(){Z.$cctor();return Z.app;};M.view=function(bE,bF,bG){return bE.node;};M.update=function(bE,bF,bG){return bG;};M.init=function(){Z.$cctor();return Z.init;};P.New=function(bE){return{menuItems:bE};};Q.New=function(bE,bF,bG,bH,bI){return{show:bE,top:bF,left:bG,baseX:bH,baseY:bI};};O.app=function(){Z.$cctor();return Z.app$1;};O.view=function(bE,bF,bG){var bH,bI,bJ,bK,bL;bH=function(bM,bN){return H.Li(bi.ofSeq(bl.delay(function(){return bl.append(bM==="-"?[H.Class("divider")]:[],bl.delay(function(){var bO;return[(bO=H.A([H.TabIndex("-1"),H.Href("#"),{$:1,$0:bM}]),(H.OnClick(function(){bG({$:2});bN();}))(bO))];}));})));};return bF.show?(bI=H.Div([H.Class("dropdown clearfix"),H._Style([H._display("block"),H._position("fixed"),H._height("95%"),H._width("95%"),H._zIndex("100")]),(bJ=H.Menu([H.Class("dropdown-menu"),H.Role("menu"),H._Style([H._display("block"),H._position("fixed"),H._marginBottom("5px"),H._top((bK=function(bM,bN){return bM(bN.toFixed(6)+"px");},(function(bM){return function(bN){return bK(bM,bN);};}(a.id))(bF.top+bF.baseY))),H._left((bL=function(bM,bN){return bM(bN.toFixed(6)+"px");},(function(bM){return function(bN){return bL(bM,bN);};}(a.id))(bF.left+bF.baseX)))])]),H.addChildren(bl.map(function(bM){return bH(bM[0],bM[1]);},bE.menuItems),bJ))]),(H.OnClick(function(){bG({$:2});}))(bI)):{$:8};};O.update=be.Curried3(function(bE,bF,bG){return O.update_(bF,bG);});O.update_=function(bE,bF){return bE.$==0?Q.New(true,bE.$1,bE.$0,bF.baseX,bF.baseY):bE.$==1?Q.New(bF.show,bF.top,bF.left,bE.$0,bE.$1):Q.New(false,bF.top,bF.left,bF.baseX,bF.baseY);};O.init=function(){Z.$cctor();return Z.init$1;};S.New=function(bE,bF,bG,bH,bI){return{title:bE,buttons:bF,content:bG,show:bH,close_:bI};};T.New=function(bE){return{dummy:bE};};R.app=function(){Z.$cctor();return Z.app$2;};R.view=function(bE,bF,bG){var bH,bI,bJ,bK,bL,bM,bN;return bE.show?(bH=R.rButtons((bI=function(bO,bP,bQ){return[bO,bP,function(){bQ();t.iterF(null,bE.close_);}];},function(bO){return bl.map(function(bP){return bI(bP[0],bP[1],bP[2]);},bO);}(bE.buttons))),H.Div([H.Id("dialog"),H.Role("dialog"),H.Class("modal"),H._Style([H._display("block"),H._position("fixed"),H._marginBottom("5px")]),H.Div([H.Class("modal-dialog"),H.Div([H.Class("modal-content"),H.Div([H.Class("modal-header"),(bJ=(bK=function(bO){var bP;bP=H.Button([H.Class("close"),{$:1,$0:"×"}]);return(H.OnClick(bO))(bP);},function(bO){return bO==null?null:{$:1,$0:bK(bO.$0)};}(bE.close_)),(bL=H.Span([]),t.defaultValue(bL,bJ))),H.H4([H.Class("modal-title"),{$:1,$0:bE.title}])]),(bM=bE.content,function(bO){return H.addChildren(bM,bO);}(H.Div([H.Class("modal-body")]))),(bN=H.Div([H.Class("modal-footer")]),H.addChildren(bH,bN))])])])):{$:8};};R.rButtons=function(bE){var bF;return bi.ofSeq((bF=function(bG,bH,bI){var bJ;bJ=H.Button([H.Class(bH),H.Disabled(false),{$:1,$0:bG}]);return(H.OnClick(bI))(bJ);},function(bG){return bl.map(function(bH){return bF(bH[0],bH[1],bH[2]);},bG);}(bE)));};R.update=be.Curried3(function(bE,bF,bG){return R.update_(bF,bG);});R.update_=function(bE,bF){return T.New(bE.$0);};R.init=function(){Z.$cctor();return Z.init$2;};V=U.Validation=be.Class({headPathIs:function(bE){return this.$==1?this.$0.$==1?bE===this.$0.$0?true:false:false:false;},addPath:function(bE){return this.$==1?new V({$:1,$0:new bi.T({$:1,$0:bE,$1:this.$0}),$1:this.$1}):new V({$:1,$0:bi.ofArray([bE]),$1:this.$0});},reducePath:function(){return this.$==1?this.$0.$==1?this.$0.$1.$==0?new V({$:0,$0:this.$1}):new V({$:1,$0:this.$0.$1,$1:this.$1}):new V({$:0,$0:this.$1}):this;}},null,V);W.New=function(bE,bF,bG){return{title:bE,buttons:bF,content:bG};};X.New=function(bE,bF,bG,bH,bI){return{processing:bE,message:bF,debug:bG,modified:bH,validations:bI};};U.app=function(){Z.$cctor();return Z.app$3;};U.view=function(bE,bF,bG){var bH,bI,bJ,bK;bH=R.rButtons(new bi.T({$:1,$0:[".","btn-xs btn-default  pull-right",function(){bG({$:3,$0:!bF.debug});}],$1:bE.buttons}));bI=bF.message===""?{$:8}:H.Span([H.Class("alert validation"),{$:1,$0:bF.message}]);return H.Div([H.Class("panel panel-info flex flexgrow"),H.Div([H.Class("panel-heading heading"),H.Label([H.Class("panel-title text-center"),{$:1,$0:(bF.modified?"*":"")+bE.title}]),bI,(bJ=H.Div([H.Class("btn-toolbar pull-right")]),H.addChildren(bH,bJ))]),(bK=bE.content,function(bL){return H.addChildren(bK,bL);}(H.Div([H.Class("panel-body flex flexgrow")])))]);};U.update=be.Curried3(function(bE,bF,bG){return U.update_(bF,bG);});U.update_=function(bE,bF){var bG,bH;bG=bE.$==1?(bH=U.addValidationsFor(bE.$0,bF.validations,bE.$1),X.New(bF.processing,bF.message,bF.debug,bF.modified,bH)):bE.$==2?X.New(bF.processing,bF.message,bF.debug,bE.$0,bF.validations):bE.$==3?X.New(bF.processing,bF.message,bE.$0,bF.modified,bF.validations):X.New(bE.$1,bE.$0,bF.debug,bF.modified,bF.validations);a.window.onbeforeunload=bG.modified?function(bI){bI.returnValue="Changes you made may not be saved.";}:function(){};return bG;};U.getValidationsFor=function(bE,bF){var bG,bH;bG=(bH=function(bI){return bI.headPathIs(bE)?{$:1,$0:bI.reducePath()}:null;},function(bI){return bl.choose(bH,bI);}(bF));return new by.New(bG);};U.addValidationsFor=function(bE,bF,bG){var bH,bI,bJ,bK;bH=(bI=function(bL){return bL.$==1?bL.$0.$==1?bL.$0.$0!==bE:true:true;},function(bL){return bz.Filter(bI,bL);}(bF));bJ=(bK=function(bL){return bL.addPath(bE);},function(bL){return new by.New$1(bA.OfSeq(bl.map(bK,bL)));}(bG));return new by.New$1(bA.OfSeq(bl.append(bJ,bH)));};U.init=function(){Z.$cctor();return Z.init$3;};Y.selectWoValidator=function(bE,bF,bG,bH,bI){var bJ,bK,bL;bJ=(bK=function(bM,bN){return H.OptionA([H.Key(bM),H.Value(bM),{$:1,$0:bN}]);},function(bM){return bl.map(function(bN){return bK(bN[0],bN[1]);},bM);}(bH));bL=function(bM,bN){var bO,bP,bQ;bO=(bP=(bQ=H.Select([H.Value(t.defaultValue("",bF))]),((H.addAttributes())(bN))(bQ)),H.addChildren(bJ,bP));return(H.OnChange(function(bR){bM(bR.target.value);}))(bO);};return Y.inputWValidator(bE,function(bM){return function(bN){return bL(bM,bN);};},bG,bI,new by.New(new bi.T({$:0})),function(){},Y.validateNothing_);};Y.textWoValidator=function(bE,bF,bG,bH){return Y.textWValidator(bE,bF,bG,bH,new by.New(new bi.T({$:0})),function(){},Y.validateNothing_);};Y.textNotEmpty=function(bE,bF,bG,bH,bI,bJ){return Y.textWValidator(bE,bF,bG,bH,bI,bJ,Y.validateEmpty_);};Y.textWValidator=function(bE,bF,bG,bH,bI,bJ,bK){var bL;bL=function(bM,bN){var bO,bP;bO=(bP=H.Input([H.Type("text"),H.Value(bF)]),((H.addAttributes())(bN))(bP));return(H.OnChange(function(bQ){bM(bQ.target.value);}))(bO);};return Y.inputWValidator(bE,function(bM){return function(bN){return bL(bM,bN);};},bG,bH,bI,bJ,bK);};Y.inputWValidator=function(bE,bF,bG,bH,bI,bJ,bK){var bL,bM,bN,bO,bP;bL=Y.getValidationsFor(bE,bI);bM=bl.length(bL)===0?"":" alert-danger";return H.Div([H.Class("form-group flex1"),H.Label([H.Class("textInputLabel"),{$:1,$0:bE}]),Y.validationMsg((bN=(bO=(bP=function(bQ,bR){return bQ(bb.p$8(bR));},function(bQ){return function(bR){return bP(bQ,bR);};}(a.id)),function(bQ){return new by.New$1(bA.OfSeq(bl.map(bO,bQ)));}(bL)),bh.concat(", ",bN))),(bF(function(bQ){bG(bQ);return bJ({$:1,$0:bE,$1:bK(bQ)});}))(bi.ofSeq(bl.delay(function(){return bl.append([H.Class("form-control"+bM)],bl.delay(function(){return bH;}));})))]);};Y.validationMsg=function(bE){return bE===""?{$:8}:H.Span([H.Class("alert validation"),{$:1,$0:bE}]);};Y.getValidationsFor=function(bE,bF){var bG,bH;bG=(bH=function(bI){return bI.headPathIs(bE)?{$:1,$0:bI.reducePath()}:null;},function(bI){return bl.choose(bH,bI);}(bF));return new by.New(bG);};Y.validateEmpty_=function(bE){var bF;bF=bE!==""?new bi.T({$:0}):bi.ofArray([new V({$:0,$0:{$:0}})]);return new by.New(bF);};Y.validateEmail_=function(bE){var bF,bG;bF=new a.RegExp("^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$");bG=(bE===""?true:bF.test(bE))?new bi.T({$:0}):bi.ofArray([new V({$:0,$0:{$:4,$0:"not a valid email",$1:bE}})]);return new by.New(bG);};Y.validateNothing_=function(bE){return new by.New(new bi.T({$:0}));};Y.op_PlusPlus=function(bE,bF,bG){return new by.New$1(bA.OfSeq(bl.append(bE(bG),bF(bG))));};Z.$cctor=be.Cctor(function(){Z.addAttributes=function(bE){return function(bF){return H.addChildren(bE,bF);};};Z.addAttribute=H.addChild;Z.DummyNew=J.New(true);Z.mailboxes=0;Z.init=I.DummyNew();Z.app=new L.New$1(M.init(),M.update,be.Curried3(M.view));Z.init$1=Q.New(false,-1,-1,0,0);Z.app$1=new L.New$1(O.init(),function(bE,bF,bG){return((O.update(bE))(bF))(bG);},be.Curried3(O.view));Z.init$2=T.New(false);Z.app$2=new L.New$1(R.init(),function(bE,bF,bG){return((R.update(bE))(bF))(bG);},be.Curried3(R.view));Z.init$3=X.New(false,"",false,false,new by.New(new bi.T({$:0})));Z.app$3=new L.New$1(U.init(),function(bE,bF,bG){return((U.update(bE))(bF))(bG);},be.Curried3(U.view));Z.$cctor=a.ignore;});_0=b.Entry=be.Class({get_parentId:function(){return this.$==1?this.$0.parentCode:this.$0.parentCode;},get_isFolder:function(){return this.$==1?false:true;},get_modified:function(){return this.$==1?this.$0.modified:"";},get_size:function(){return this.$==1?this.$0.size.toLocaleString():"";},get_content:function(){return this.$==1?this.$0.contentType:"";},get_theme:function(){return this.$==1?this.$0.tags:"";},get_name:function(){return this.$==1?this.$0.name:this.$0.name;},get_children:function(){return this.$==1?[]:this.$1;},get_id:function(){return this.$==1?this.$0.id:this.$0.id;}},null,_0);_2.New=function(bE,bF,bG,bH,bI,bJ,bK){return{entry:bE,expanded:bF,selected:bG,level:bH,setExpanded:bI,setSelected:bJ,onClick:bK};};_3.New=function(bE){return{hover:bE};};_1.app=function(){_.$cctor();return _.app;};_1.view=function(bE,bF,bG){var bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;bH=!bl.isEmpty(bE.entry.get_children());bI=(bJ=(bK=H.Tr([H.Td([H._Style([H._overflow("hidden"),H._textOverflow("ellipsis")]),(bL=(bM=(bN=(bO=H.Div([{$:1,$0:bH?bE.expanded?"\ue114 ":"\ue080 ":"\ue235 "},H._Style([H._display("inline"),H._fontFamily("Glyphicons Halflings"),H._fontSize("11px"),H._cursor("pointer"),H._paddingLeft((bP=function(bT,bU){return bT(a.String(bU)+"ch");},(function(bT){return function(bU){return bP(bT,bU);};}(a.id))(bE.level*4)))])]),(bQ=bF.hover?bi.ofArray([H._Style([H._background("#e6e6e6")])]):new bi.T({$:0}),((H.addAttributes())(bQ))(bO))),(H.OnMouseOver(function(){if(!bF.hover)bG({$:0,$0:true});}))(bN)),(H.OnMouseOut(function(){bG({$:0,$0:false});}))(bM)),(H.OnClick(function(){bE.setExpanded([bE.entry.get_id(),!bE.expanded]);}))(bL)),H.Div([{$:1,$0:bE.entry.get_name()},H._Style([H._display("inline"),H._paddingRight("1ch")]),H.Draggable(true)])])]),(_1.addMoreFields(H.Td,bi.ofArray([{$:1,$0:bE.entry.get_theme()},(bR=H.Div([{$:1,$0:":::"},H._Style([H._textAlign("center")])]),(H.OnClick(function(bT){bE.setSelected({$:1,$0:bE.entry.get_id()});bE.onClick(bT);}))(bR)),{$:1,$0:bE.entry.get_content()},H.Div([{$:1,$0:bE.entry.get_size()},H._Style([H._textAlign("right")])]),{$:1,$0:bE.entry.get_modified()}])))(bK)),(bS=bE.selected?bi.ofArray([H._Style([H._background("lightblue")])]):new bi.T({$:0}),((H.addAttributes())(bS))(bJ)));return(H.OnClick(function(){bE.setSelected({$:1,$0:bE.entry.get_id()});}))(bI);};_1.addMoreFields=function(bE,bF){var bG,bH;bG=(bH=function(bI){return bE(bi.ofArray([H._Style([H._paddingLeft("0.5ch"),H._paddingRight("0.5ch"),H._overflow("hidden"),H._textOverflow("ellipsis")]),bI]));},function(bI){return bi.map(bH,bI);}(bF));return function(bI){return H.addChildren(bG,bI);};};_1.update=function(bE,bF,bG){return _3.New(bF.$0);};_1.init=function(){_.$cctor();return _.init;};_5.New=function(bE,bF){return{entries:bE,onClick:bF};};_6.New=function(bE,bF,bG){return{sortBy:bE,expanded:bF,selected:bG};};_4.app=function(){_.$cctor();return _.app$1;};_4.view=function(bE,bF,bG){var bH,bI,bJ;function bK(bL,bM,bN){var bO;bO=function(bP){var bQ,bR,bS,bT,bU,bV,bW;bQ=!bl.isEmpty(bP.get_children());bR=bL.expanded.Contains(bP.get_id());bS=_1.app().node(_2.New(bP,bR,bg.Equals(bL.selected,{$:1,$0:bP.get_id()}),bM,(bT=function(bX,bY){return{$:0,$0:bX,$1:bY};},function(bX){return bG(bT.apply(null,bX));}),(bU=function(bX){return{$:1,$0:bX};},function(bX){return bG(bU(bX));}),bE.onClick));return(bQ?bR:false)?bl.append([bS],(bV=bP.get_children(),(bW=bM+1,function(bX){return bK(bL,bW,bX);}(bV)))):[bS];};return function(bP){return bl.collect(bO,bP);}(bN);}bH=H.Table([H._Style([H._whiteSpace("nowrap")]),H.THead([(bI=H.Tr([H.Th([{$:1,$0:"Element"},H._Style([H._paddingLeft("3ch")])])]),(_1.addMoreFields(H.Th,bi.ofArray([{$:1,$0:"Theme"},{$:1,$0:"Action"},{$:1,$0:"Content"},{$:1,$0:"Size"},{$:1,$0:"Modified"}])))(bI))]),H.TBody(bK(bF,0,bE.entries))]);bJ=bi.ofArray([H._Style([H._margin("5px"),H._overflow("auto")])]);return((H.addAttributes())(bJ))(bH);};_4.update=be.Curried3(function(bE,bF,bG){return _4.update_(bF,bG);});_4.update_=function(bE,bF){var bG;return bE.$==0?(bG=((bE.$1?function(bH){return function(bI){return bI.Add(bH);};}:function(bH){return function(bI){return bI.Remove(bH);};})(bE.$0))(bF.expanded),_6.New(bF.sortBy,bG,bF.selected)):_6.New(bF.sortBy,bF.expanded,bE.$0);};_4.init=function(){_.$cctor();return _.init$1;};_8.New=function(bE,bF){return{title:bE,token:bF};};_9.New=function(bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP){return{entries:bE,form:bF,popup:bG,dialog:bH,fileTree:bI,uploadName:bJ,uploadFolder:bK,themeTags:bL,showDialog:bM,client:bN,lastUpload:bO,timerHandler:bP};};_7.showForm_=function(bE,bF,bG){return I.withContainerDo("container",function(bH){var bI;w.call((bI=w.wrap(),bI.Delay(function(){return bI.Bind$2((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.Server.fetchTokenAR_:2146392328",[]),function(bJ){return bI.Bind$3(_7.fetchEntries_(bJ,_4.init().sortBy),function(bK){var bL,bM;bL=_7.init(bF,bG,bK);bM=new L.New$1(bL,_7.update,be.Curried3(_7.view));bM.run(_8.New(bE,bJ),bH.Dom);return bI.Zero();});});})));});};_7.view=function(bE,bF,bG){var bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC;function cD(cI){while(true)return w.call((function(cJ){return function(cK){return cK.Delay(function(){return cK.Bind$1(_7.getUploadFileRO_(),function(cL){var cM;cM=function(cN){bG({$:11,$0:function(cO){var cP;cP=cO.timerHandler;cP==null?void 0:a.clearInterval(cP.$0);return _7.update(bE,{$:5,$0:null},cO);}});bG({$:3,$0:cJ});bQ(cN,cJ);cE(cJ);};(function(cN){if(cN==null);else cM(cN.$0);}(cL));return cK.Zero();});});};}(cI))(w.wrap()));}function cE(cI){bG({$:5,$0:{$:1,$0:a.setInterval(function(cJ){return cF(cI,cJ);},2000)}});}function cF(cI){var cJ,cK;cJ=cI.$0;cK=_7.getFileTime_();return(cJ===_7.getFileName_()?cI.$4!==cK:false)?cD({$:0,$0:cJ,$1:cI.$1,$2:cI.$2,$3:cI.$3,$4:cK},null):null;}function cG(cI){var cJ,cK,cL,cM,cN;return(cJ=cI.parentCode,(cJ!=null?cJ.$==1:false)?(cK=cJ.$0,(cL=(cM=(cN=function(cO){return bg.Equals(cO.id,cK);},function(cO){return bl.tryFind(cN,cO);}(_7.getFolders(bF))),cM==null?null:{$:1,$0:cG(cM.$0)}),t.defaultValue("",cL))):"")+"/"+cI.name;}function cH(){var cI,cJ,cK;return bp.ofSeq((cI=function(cL){return cL[1];},function(cL){return bl.sortBy(cI,cL);}((cJ=[["","/"]],function(cL){return bl.append(cJ,cL);}((cK=function(cL){return[a.String(cL.id),cG(cL)];},function(cL){return bl.map(cK,cL);}(_7.getFolders(bF))))))));}_7.set_renders(_7.renders()+1);bH=function(cI){bG({$:7,$0:{$:0,$0:cI,$1:true}});};bI=function(cI){bG({$:7,$0:{$:0,$0:cI,$1:false}});};bJ=function(cI){var cJ;w.call((cJ=w.wrap(),cJ.Delay(function(){return cJ.Bind$3(_7.fetchEntries_(bE.token,bF.fileTree.sortBy),function(cK){bG({$:4,$0:cK});bI(cI);return cJ.Zero();});})));};bK=function(cI){var cJ;w.call((cJ=w.wrap(),cJ.Delay(function(){return cJ.Bind$2(cI,function(cK){bJ(cK);return cJ.Zero();});})));};bL=function(cI){return bK((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.UploadFormServer.DeleteFileAR_:-1987641171",[bE.token,cI.get_id(),cI.get_isFolder()]));};bM=function(cI,cJ,cK){return bK((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.UploadFormServer.RenameFileAR_:-739456173",[bE.token,cI,cJ,cK]));};bN=function(cI,cJ){return bK((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.UploadFormServer.MoveToAR_:-844966758",[bE.token,cI.get_id(),cI.get_isFolder(),cJ]));};bO=function(cI,cJ){return bK((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.UploadFormServer.RenameFolderAR_:74399420",[bE.token,cI,cJ]));};bP=function(cI,cJ){return bK((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.UploadFormServer.CreateFolderAR_:778215497",[bE.token,cI,cJ]));};bQ=function(cI,cJ){var cK,cL,cM,cN,cO;cK=cJ.$0;cL=cJ.$1;cM=cJ.$2;cN=cJ.$3;return w.call((cO=w.wrap(),cO.Delay(function(){return cO.Bind$1(u.tryProtection(),function(){var cP,cQ;bH((cP=function(cR,cS){return cR("Uploading file "+bD.toSafe(cS)+" ...");},(function(cR){return function(cS){return cP(cR,cS);};}(a.id))(cI.name)));cQ=new a.FileReader();cQ.onloadend=function(){return bK((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.UploadFormServer.UploadFileAR_:664510523",[bE.token,cK,cL,cQ.result,cI.type,cI.size,cM,cN]));};cQ.readAsDataURL(cI);return cO.Zero();});})));};bR=function(cI){var cJ;cJ=function(cK){return bg.Equals(cK.id,cI);};return function(cK){return bl.tryFind(cJ,cK);}(_7.getFolders(bF));};bS=function(cI){var cJ,cK;cJ=(cK=cI==null?null:bR(cI.$0),cK==null?null:{$:1,$0:cG(cK.$0)});return t.defaultValue("",cJ);};bT=function(cI){var cJ;return((cJ=function(cK,cL,cM){return cK(bD.toSafe(cL)+"/"+bD.toSafe(cM));},(be.Curried3(cJ))(a.id))(bS(cI.get_parentId())))(cI.get_name());};bU=function(cI){bG({$:2,$0:cI.get_isFolder()?{$:1,$0:cI.get_id()}:cI.get_parentId()});};bV=function(cI){bG({$:2,$0:cI.get_parentId()});};bW=(bX=bF.form.validations,(bY=(bZ=function(cI){return{$:7,$0:cI};},function(cI){return bG(bZ(cI));}),(b0=(b1=bF.uploadFolder,b1==null?null:{$:1,$0:a.String(b1.$0)}),(b2=function(cI){return{$:2,$0:cI===""?null:{$:1,$0:cI}};},(b3=bF.showDialog,b3.$==2?["Move to",bi.ofArray([["Ok","btn",(b4=b3.$0,(b5=bF.uploadFolder,function(cI){return bN(b4,b5,cI);}))],["Cancel","btn",function(){}]]),bi.ofArray([Y.selectWoValidator("Folder",b0,function(cI){return bG(b2(cI));},cH(),[])])]:b3.$==3?["Rename File",bi.ofArray([["Ok","btn",(b6=b3.$0.get_id(),(b7=bF.uploadName,(b8=bF.themeTags,function(cI){return bM(b6,b7,b8,cI);})))],["Cancel","btn",function(){}]]),bi.ofArray([Y.textNotEmpty("File Name",bF.uploadName,(b9=function(cI){return{$:1,$0:cI};},function(cI){return bG(b9(cI));}),[H.Placeholder("enter file name"),H.MaxLength(100)],bX,bY),Y.textWoValidator("Theme tags",bF.themeTags,(b_=function(cI){return{$:0,$0:cI};},function(cI){return bG(b_(cI));}),bi.ofArray([H.Placeholder("enter tags"),H.MaxLength(200)]))])]:b3.$==4?["Rename Folder",bi.ofArray([["Ok","btn",(b$=b3.$0.get_id(),(ca=bF.uploadName,function(cI){return bO(b$,ca,cI);}))],["Cancel","btn",function(){}]]),bi.ofArray([Y.textNotEmpty("File Name",bF.uploadName,(cb=function(cI){return{$:1,$0:cI};},function(cI){return bG(cb(cI));}),[H.Placeholder("enter file name"),H.MaxLength(100)],bX,bY)])]:b3.$==1?["Create Folder",bi.ofArray([["Ok","btn",(cc=bF.uploadName,(cd=bF.uploadFolder,function(cI){return bP(cc,cd,cI);}))],["Cancel","btn",function(){}]]),bi.ofArray([Y.selectWoValidator("Parent Folder",b0,function(cI){return bG(b2(cI));},cH(),[]),Y.textNotEmpty("Folder Name",bF.uploadName,(ce=function(cI){return{$:1,$0:cI};},function(cI){return bG(ce(cI));}),[H.Placeholder("enter folder name"),H.MaxLength(100)],bX,bY)])]:b3.$==5?(cf=b3.$0,["Confirm Delete ",bi.ofArray([["DELETE","btn",function(cI){return bL(cf,cI);}],["Cancel","btn",function(){}]]),bi.ofArray([{$:1,$0:((cg=function(cI,cJ,cK){return cI("Delete "+bD.toSafe(cJ)+" "+bD.toSafe(cK)+"?");},(be.Curried3(cg))(a.id))(cf.get_isFolder()?"folder":"file"))(cf.get_name())}])]):b3.$==6?["",new bi.T({$:0}),new bi.T({$:0})]:["Upload File",bi.ofArray([["Upload","btn",(ch={$:0,$0:bF.uploadName,$1:bF.uploadFolder,$2:bF.themeTags,$3:bF.client,$4:_7.getFileTime_()},function(cI){return cD(ch,cI);})],["Cancel","btn",function(){}]]),bi.ofArray([H.Label([{$:1,$0:"Select File:"},H._Style([H._paddingRight("1ch"),H._paddingBottom("1em")])]),(ci=H.Button([{$:1,$0:(cj=_7.getFileName_(),cj===""?"...":cj)}]),(H.OnClick(function(){return a.jQuery("#filesel").click();}))(ci)),Y.textNotEmpty("File Name",bF.uploadName,(ck=function(cI){return{$:1,$0:cI};},function(cI){return bG(ck(cI));}),[H.Placeholder("enter file name"),H.MaxLength(100)],bX,bY),Y.selectWoValidator("Folder",b0,function(cI){return bG(b2(cI));},cH(),[]),Y.textWoValidator("Theme tags",bF.themeTags,(cl=function(cI){return{$:0,$0:cI};},function(cI){return bG(cl(cI));}),bi.ofArray([H.Placeholder("enter tags"),H.MaxLength(200)]))])])))));cm=(cn=bF.lastUpload,((cn!=null?cn.$==1:false)?_7.getFileName_()!==""?(co=cn.$0,true):false:false)?(cp=H.Input([H.Type("button"),H.Value((cq=function(cI,cJ){return cI("Re"+bb.p$10(cJ));},(function(cI){return function(cJ){return cq(cI,cJ);};}(a.id))(co))),H._Style([H._flex("0 0"),H._alignSelf("flex-start")])]),(H.OnClick(function(cI){return cD(co,cI);}))(cp)):{$:8});cr=W.New(bE.title,bi.ofArray([["New Folder","btn    btn-default  pull-right",function(){bG({$:6,$0:{$:1}});}],["Upload File","btn    btn-default  pull-right",function(){bG({$:1,$0:_7.getFileName_()});bG({$:6,$0:{$:0}});}]]),bi.ofArray([{$:1,$0:(cs=function(cI,cJ){return cI("Renders: "+a.String(cJ));},(function(cI){return function(cJ){return cs(cI,cJ);};}(a.id))(_7.renders()))},(ct=S.New(bW[0],bW[1],bW[2],!bg.Equals(bF.showDialog,{$:6}),{$:1,$0:function(){bG({$:6,$0:{$:6}});}}),R.view(ct,bF.dialog,(cu=function(cI){return{$:9,$0:cI};},function(cI){return bG(cu(cI));}))),(cv=P.New((cw=function(cI){var cJ;cJ=function(cK){var cL,cM;cL=(cM=function(cN){return bg.Equals(cN.get_id(),cK);},function(cN){return bl.filter(cM,cN);}(_7.flatEntries(bF)));bl.iter(cI,cL);};(function(cK){if(cK==null);else cJ(cK.$0);}(bF.fileTree.selected));},bi.ofArray([["Upload file",function(){cw(function(cI){bU(cI);bG({$:1,$0:_7.getFileName_()});bG({$:6,$0:{$:0}});});}],["Open ",function(){cw(function(cI){var cJ,cK;if(!cI.get_isFolder()){cJ=a.window.open((cK=function(cL,cM){return cL("/EPFile"+bD.toSafe(cM));},(function(cL){return function(cM){return cK(cL,cM);};}(a.id))(bT(cI))),"blank");}});}],["New folder",function(){cw(function(cI){bU(cI);bG({$:6,$0:{$:1}});});}],["Move",function(){cw(function(cI){bV(cI);bG({$:6,$0:{$:2,$0:cI}});});}],["Rename",function(){cw(function(cI){var cJ;cJ=cI.get_isFolder()?function(cK){return{$:4,$0:cK};}:(bG({$:0,$0:cI.get_theme()}),function(cK){return{$:3,$0:cK};});bG({$:1,$0:cI.get_name()});bG({$:6,$0:cJ(cI)});});}],["-",function(){}],["Delete",function(){cw(function(cI){bG({$:6,$0:{$:5,$0:cI}});});}]]))),O.view(cv,bF.popup,(cx=function(cI){return{$:8,$0:cI};},function(cI){return bG(cx(cI));}))),(cy=H.Input([H.Type("file"),H.Id("filesel"),H._Style([H._display("none")])]),(H.OnChange((cz=(cA=function(cI){return{$:1,$0:cI};},function(cI){return cA(_7.getFileName_(cI));}),function(cI){return bG(cz(cI));})))(cy)),cm,_4.view(_5.New(bF.entries,function(cI){var cJ;cJ=cI.target.getBoundingClientRect.call(cI.target,null);bG({$:8,$0:{$:0,$0:cJ.left,$1:cJ.top}});}),bF.fileTree,(cB=function(cI){return{$:10,$0:cI};},function(cI){return bG(cB(cI));}))]));return U.view(cr,bF.form,(cC=function(cI){return{$:7,$0:cI};},function(cI){return bG(cC(cI));}));};_7.renders=function(){_.$cctor();return _.renders;};_7.set_renders=function(bE){_.$cctor();_.renders=bE;};_7.flatEntries=function(bE){return _7.flattenEntries(bE.entries);};_7.getFolders=function(bE){var bF;bF=function(bG){return bG.$==0?{$:1,$0:bG.$0}:null;};return function(bG){return bl.choose(bF,bG);}(bE.entries);};_7.fetchEntries_=function(bE,bF){var bG;bG=w.wrap();return bG.Delay(function(){return bG.Bind$2((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.UploadFormServer.GetFilesInfoAR_:1270683949",[bE]),function(bH){var bI,bJ,bK,bL;function bM(bN){var bO,bP;return bl.append((bO=function(bQ){return new _0({$:0,$0:bQ,$1:bM({$:1,$0:bQ.id})});},function(bQ){return bl.map(bO,bQ);}(bK(bN))),(bP=function(bQ){return new _0({$:1,$0:bQ});},function(bQ){return bl.map(bP,bQ);}(bL(bN))));}bI=bH[0];bJ=bH[1];bK=function(bN){var bO,bP;bO=function(bQ){return bQ.name.toLowerCase();};return function(bQ){return bl.sortBy(bO,bQ);}((bP=function(bQ){return bg.Equals(bQ.parentCode,bN);},function(bQ){return bl.filter(bP,bQ);}(bI)));};bL=function(bN){var bO,bP;bO=function(bQ){var bR;bR=function(bS){return bS.$==1?bQ.modified:bS.$==2?bQ.tags.toLowerCase():bS.$==3?bQ.contentType.toLowerCase():bS.$==4?bQ.size:bQ.name.toLowerCase();};return function(bS){return bi.map(bR,bS);}(bF);};return function(bQ){return bl.sortBy(bO,bQ);}((bP=function(bQ){return bg.Equals(bQ.parentCode,bN);},function(bQ){return bl.filter(bP,bQ);}(bJ)));};return bG.Return(bM(null));});});};_7.getFileTime_=function(){var bE,bF;bE=(bF=u.flow(),bF.Delay(function(){return bF.Bind(_7.getUploadFileRO_(),function(bG){var bH,bI;return bF.Return((bH=(bI=function(bJ){return bJ.lastModifiedDate.toUTCString();},function(bJ){return bJ==null?null:{$:1,$0:bI(bJ.$0)};}(bG)),t.defaultValue("",bH)));});}));return u.ifError("",bE);};_7.getFileName_=function(){var bE,bF;bE=(bF=u.flow(),bF.Delay(function(){return bF.Bind(_7.getUploadFileRO_(),function(bG){var bH,bI;return bF.Return((bH=(bI=function(bJ){return bJ.name;},function(bJ){return bJ==null?null:{$:1,$0:bI(bJ.$0)};}(bG)),t.defaultValue("",bH)));});}));return u.ifError("",bE);};_7.getUploadFileRO_=function(){var bE;bE=u.flow();return bE.Delay(function(){return bE.Bind(u.tryProtection(),function(){var bF;bF=a.document.getElementById("filesel").files;return bE.Return(bp.tryPick(function(bG){return{$:1,$0:bG};},bF));});});};_7.update=function(bE,bF,bG){var bH,bI,bJ;bG.form.debug?(bH=function(bK,bL){return bK(bb.p$12(bL));},(function(bK){return function(bL){return bH(bK,bL);};}(function(bK){a.console.log(bK);}))(bF)):void 0;return bF.$==1?_9.New(bG.entries,bG.form,bG.popup,bG.dialog,bG.fileTree,bF.$0,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler):bF.$==2?_9.New(bG.entries,bG.form,bG.popup,bG.dialog,bG.fileTree,bG.uploadName,bF.$0,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler):bF.$==3?_9.New(bG.entries,bG.form,bG.popup,bG.dialog,bG.fileTree,bG.uploadName,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,{$:1,$0:bF.$0},bG.timerHandler):bF.$==5?_9.New(bG.entries,bG.form,bG.popup,bG.dialog,bG.fileTree,bG.uploadName,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bF.$0):bF.$==0?_9.New(bG.entries,bG.form,bG.popup,bG.dialog,bG.fileTree,bG.uploadName,bG.uploadFolder,bF.$0,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler):bF.$==4?_9.New(bF.$0,bG.form,bG.popup,bG.dialog,bG.fileTree,bG.uploadName,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler):bF.$==6?_9.New(bG.entries,bG.form,bG.popup,bG.dialog,bG.fileTree,bG.uploadName,bG.uploadFolder,bG.themeTags,bF.$0,bG.client,bG.lastUpload,bG.timerHandler):bF.$==7?(bI=U.update_(bF.$0,bG.form),_9.New(bG.entries,bI,bG.popup,bG.dialog,bG.fileTree,bG.uploadName,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler)):bF.$==8?_9.New(bG.entries,bG.form,O.update_(bF.$0,bG.popup),bG.dialog,bG.fileTree,bG.uploadName,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler):bF.$==9?_9.New(bG.entries,bG.form,bG.popup,R.update_(bF.$0,bG.dialog),bG.fileTree,bG.uploadName,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler):bF.$==10?(bJ=_4.update_(bF.$0,bG.fileTree),_9.New(bG.entries,bG.form,bG.popup,bG.dialog,bJ,bG.uploadName,bG.uploadFolder,bG.themeTags,bG.showDialog,bG.client,bG.lastUpload,bG.timerHandler)):bF.$0(bG);};_7.init=function(bE,bF,bG){return _9.New(bG,U.init(),O.init(),R.init(),_4.init(),"",null,bE,{$:6},bF,null,null);};_7.flattenEntries=function(bE){var bF;return bl.append(bE,(bF=function(bG){return _7.flattenEntries(bG.get_children());},function(bG){return bl.collect(bF,bG);}(bE)));};_.$cctor=be.Cctor(function(){_.init=_3.New(false);_.app=new L.New$1(_1.init(),_1.update,be.Curried3(_1.view));_.init$1=_6.New(bi.ofArray([{$:0},{$:2},{$:1},{$:3},{$:4}]),new by.New(new bi.T({$:0})),null);_.app$1=new L.New$1(_4.init(),function(bE,bF,bG){return((_4.update(bE))(bF))(bG);},be.Curried3(_4.view));_.renders=0;_.$cctor=a.ignore;});ba.New=function(bE,bF,bG,bH,bI){return{userName:bE,password:bF,inProgress:bG,goLink:bH,error:bI};};$.showForm_=function(bE,bF){return I.withContainerDo("",function(bG){var bH;bH=new L.New$1($.init(bE,bF),$.update,be.Curried3($.view));bH.run(I.DummyNew(),bG.Dom);});};$.view=function(bE,bF,bG){var bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX;bH=bF.inProgress?" disabled":"";bI=(bJ=H.Form([(bK=H.Input([H.Type("text"),H.Class("form-control"+bH),H.Placeholder("User Name"),H.Value(bF.userName),H.Disabled(bF.inProgress)]),(H.OnChange((bL=(bM=(bN=function(bY){return bY.target;},(bO=function(bY){return bY.value;},function(bY){return bO(bN(bY));})),(bP=function(bY){return{$:0,$0:bY};},function(bY){return bP(bM(bY));})),function(bY){return bG(bL(bY));})))(bK)),H.Br([]),(bQ=H.Input([H.Type("password"),H.Class("form-control"+bH),H.Placeholder("Password"),H.Value(bF.password),H.Disabled(bF.inProgress)]),(H.OnChange((bR=(bS=(bT=function(bY){return bY.target;},(bU=function(bY){return bY.value;},function(bY){return bU(bT(bY));})),(bV=function(bY){return{$:1,$0:bY};},function(bY){return bV(bS(bY));})),function(bY){return bG(bR(bY));})))(bQ)),H.Br([]),H.Button([H.Type("submit"),H.Class("btn btn-primary btn-block"+bH),{$:1,$0:"Login"}]),H.Div([H.Class("flex-row"),H.Div([H.Class("flexgrow"),H.Hr([])]),H.Div([H.Class("flexgrow-1-5 text-center"),H.H5([{$:1,$0:"or"}])]),H.Div([H.Class("flexgrow"),H.Hr([])])]),(bW=H.Button([H.Type("button"),H.Class("btn btn-info btn-block"+bH),{$:1,$0:"Enter as Guest"}]),(H.OnClick(function(){var bY,bZ;bG({$:2});bY=C.callR((bZ=function(b0,b1){var b2;return b0?bG({$:3,$0:(b2=function(b3,b4){return b3(bD.printList(function(b5){return bb.p(b5);},b4));},(function(b3){return function(b4){return b2(b3,b4);};}(a.id))(b1))}):null;},function(b0){u.messagesDo(bZ,b0);}));bY.Delay(function(){bY.Bind$1((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.Server.guestLoginAR_:2146392328",[]),function(){a.window.location.href=bF.goLink;bY.Zero();});});}))(bW)),H.Br([]),H.Div(bi.ofSeq(bl.delay(function(){return bl.append([H.Class("text-center")],bl.delay(function(){return bF.inProgress?[H.Img([H.Src("/EPFileX/image/loader.gif")])]:[];}));}))),H.Div((bX=bF.error,bX==null?new bi.T({$:0}):bi.ofArray([H.Class("alert alert-danger"),{$:1,$0:bX.$0}])))]),(H.OnSubmit(function(bY){var bZ,b0;bY.preventDefault();bG({$:2});bZ=C.callR((b0=function(b1,b2){var b3;return b1?bG({$:3,$0:(b3=function(b4,b5){return b4(bD.printList(function(b6){return bb.p(b6);},b5));},(function(b4){return function(b5){return b3(b4,b5);};}(a.id))(b2))}):null;},function(b1){u.messagesDo(b0,b1);}));bZ.Delay(function(){bZ.Bind$1((new bC.New()).Async("CIPHERPrototype5:CIPHERSpace.Server.LoginAR_:67530287",[bF.userName,bF.password]),function(){a.window.location.href=bF.goLink;bZ.Zero();});});}))(bJ));return H.Div([H.Class("flex-row flex-align-center flexgrow"),H.Div([H.Class("blur"),H._Style([H._position("absolute"),H._top("0Px"),H._left("0Px"),H._bottom("0Px"),H._right("0Px"),H.newAttr("backgroundImage","url('/EPFileX/image/BI_CONSULTANCY.jpg')"),H.newAttr("backgroundSize","cover"),H.newAttr("backgroundPosition","center center")])]),H.Div([H.Class("container"),H.Div([H.Class("row"),H.Div([H.Class("col-xs-10 col-xs-offset-1 col-md-6 col-md-offset-3"),H.Div([H.Class("panel panel-default shadow"),H.Div([H.Class("panel-body"),H.Div([H._Style([H._textAlign("center")]),H.Img([{$:2,$0:"alt",$1:"Brand"},H.Src("/EPFileX/image/LOGO_cipher2.png"),H._Style([H._width("200px")])]),bI])])])])])])]);};$.update=function(bE,bF,bG){return bF.$==1?ba.New(bG.userName,bF.$0,bG.inProgress,bG.goLink,null):bF.$==2?ba.New(bG.userName,bG.password,true,bG.goLink,bG.error):bF.$==3?ba.New(bG.userName,bG.password,false,bG.goLink,{$:1,$0:bF.$0}):ba.New(bF.$0,bG.password,bG.inProgress,bG.goLink,null);};$.init=function(bE,bF){return ba.New("","",false,bE,bF);};bb.p=function(bE){return bE.$==30?"ErrOptionIsNone":bE.$==29?"ErrGuestUserNotActivated":bE.$==28?"ErrAleaError ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")":bE.$==27?"ErrNoRecordsProcessed":bE.$==26?"ErrUnsuportedDataStorage":bE.$==25?"ErrWebSharperCompiler "+bD.prettyPrint(bE.$0):bE.$==24?"ErrFSharpCompiler "+bD.prettyPrint(bE.$0):bE.$==23?"ErrFeatureNotImplemented "+bD.prettyPrint(bE.$0):bE.$==22?"ErrRecordNotFound ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")":bE.$==21?"ErrRecordWasNotUpdated "+bD.prettyPrint(bE.$0):bE.$==20?"ErrDockerIsNotPresent "+bb.p$4(bE.$0):bE.$==19?"ErrObjectNotFound "+bb.p$7(bE.$0):bE.$==18?"ErrNoProvisionedClientAvailable":bE.$==17?"ErrClientNotFound "+bb.p$6(bE.$0):bE.$==16?"ErrUserIsNotDefined "+bD.prettyPrint(bE.$0):bE.$==15?"ErrUserIsNotAssociatedToClient "+bb.p$5(bE.$0):bE.$==14?"ErrDockerDataNotFound "+bb.p$4(bE.$0):bE.$==13?"ErrUniqueIdNotDefinedForReport "+bb.p$1(bE.$0):bE.$==12?"ErrDockerDefinitionNotFound "+bb.p$4(bE.$0):bE.$==11?"ErrTableDefinitionNotFound "+bb.p$2(bE.$0):bE.$==10?"ErrReportDefinitionNotFound "+bb.p$1(bE.$0):bE.$==9?"ErrInvalidContentPageForClient "+bD.prettyPrint(bE.$0):bE.$==8?"ErrInvalidToken "+bD.prettyPrint(bE.$0):bE.$==7?"ErrLoginFailed "+bD.prettyPrint(bE.$0):bE.$==6?"ErrUserIsNotLoggedIn":bE.$==5?"ErrValueIsNull ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")":bE.$==4?"ErrParameterMissing "+bD.prettyPrint(bE.$0):bE.$==3?"ErrDuplicatedKeys ("+bD.prettyPrint(bE.$0)+", "+bD.printArray(bD.prettyPrint,bE.$1)+")":bE.$==2?"ErrUndefinedKeys ("+bD.prettyPrint(bE.$0)+", "+bD.printArray(bD.prettyPrint,bE.$1)+")":bE.$==1?"ErrExceptionThrown "+bD.prettyPrint(bE.$0):"WarnNotification "+bD.prettyPrint(bE.$0);};bb.p$7=function(bE){return"OWorkspace "+bD.prettyPrint(bE.$0);};bb.p$6=function(bE){return"Client "+bD.prettyPrint(bE.$0);};bb.p$5=function(bE){return"User "+bD.prettyPrint(bE.$0);};bb.p$4=function(bE){return bE.$==5?"DckDockSpawn":bE.$==4?"DckPhosphor":bE.$==3?"DckWCDocker":bE.$==2?"DckGoldenLayout":bE.$==1?"DckSingle":"DckEmpty";};bb.p$2=function(bE){return bE.$==2?"ExternalTable ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")":bE.$==1?"SystemTable "+bD.prettyPrint(bE.$0):"DimensionTable "+bb.p$3(bE.$0);};bb.p$3=function(bE){return"Dimension "+bD.prettyPrint(bE.$0);};bb.p$1=function(bE){return"Report "+bD.prettyPrint(bE.$0);};bb.p$8=function(bE){return bE.$==1?"PathValidation ("+bD.printList(bD.prettyPrint,bE.$0)+", "+bb.p$9(bE.$1)+")":"InputValidation "+bb.p$9(bE.$0);};bb.p$9=function(bE){return bE.$==4?"VPatternNotMatch ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")":bE.$==3?"VUnsupportedData "+bD.prettyPrint(bE.$0):bE.$==2?"VCannotModify":bE.$==1?"VNotLongerThan "+bD.prettyPrint(bE.$0):"VEmpty";};bb.p$10=function(bE){return"Upload ("+bD.prettyPrint(bE.$0)+", "+bb.p$11(bE.$1)+", "+bD.prettyPrint(bE.$2)+", "+bb.p$6(bE.$3)+", "+bD.prettyPrint(bE.$4)+")";};bb.p$11=function(bE){return bE==null?"null":"Some "+bD.prettyPrint(bE.$0);};bb.p$12=function(bE){return bE.$==11?"DoAction "+"<fun>":bE.$==10?"ToFileTreeMsg "+bb.p$19(bE.$0):bE.$==9?"ToDialogMsg "+bb.p$18(bE.$0):bE.$==8?"ToPopupMsg "+bb.p$17(bE.$0):bE.$==7?"ToFormMsg "+bb.p$16(bE.$0):bE.$==6?"ShowDialog "+bb.p$14(bE.$0):bE.$==5?"SetTimerHandler "+bb.p$13(bE.$0):bE.$==4?"SetEntries "+bD.prettyPrint(bE.$0):bE.$==3?"SetLastUpload "+bb.p$10(bE.$0):bE.$==2?"SetUploadFolder "+bb.p$11(bE.$0):bE.$==1?"SetUploadName "+bD.prettyPrint(bE.$0):"SetThemeTags "+bD.prettyPrint(bE.$0);};bb.p$19=function(bE){return bE.$==1?"SetSelected "+bb.p$11(bE.$0):"SetExpanded ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")";};bb.p$18=function(bE){return"Dummy "+bD.prettyPrint(bE.$0);};bb.p$17=function(bE){return bE.$==2?"HidePopUp":bE.$==1?"AdjustBase ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")":"ShowPopUp ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")";};bb.p$16=function(bE){return bE.$==3?"SetDebug "+bD.prettyPrint(bE.$0):bE.$==2?"SetModified "+bD.prettyPrint(bE.$0):bE.$==1?"AddValidation ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")":"ShowInfo ("+bD.prettyPrint(bE.$0)+", "+bD.prettyPrint(bE.$1)+")";};bb.p$14=function(bE){return bE.$==6?"NoDialog":bE.$==5?"ConfirmDelete "+bb.p$15(bE.$0):bE.$==4?"RenameFolder "+bb.p$15(bE.$0):bE.$==3?"RenameFile "+bb.p$15(bE.$0):bE.$==2?"Move "+bb.p$15(bE.$0):bE.$==1?"CreateFolder":"UploadFile";};bb.p$15=function(bE){return bE.$==1?"EFile "+bc.p$1(bE.$0):"EFolder ("+bc.p(bE.$0)+", "+bD.prettyPrint(bE.$1)+")";};bc.p$1=function(bE){return"{"+("id = "+bD.prettyPrint(bE.id))+"; "+("name = "+bD.prettyPrint(bE.name))+"; "+("folderName = "+bD.prettyPrint(bE.folderName))+"; "+("parentCode = "+bb.p$11(bE.parentCode))+"; "+("contentType = "+bD.prettyPrint(bE.contentType))+"; "+("size = "+bD.prettyPrint(bE.size))+"; "+("tags = "+bD.prettyPrint(bE.tags))+"; "+("modified = "+bD.prettyPrint(bE.modified))+"}";};bc.p=function(bE){return"{"+("id = "+bD.prettyPrint(bE.id))+"; "+("name = "+bD.prettyPrint(bE.name))+"; "+("parentCode = "+bb.p$11(bE.parentCode))+"}";};bb.p$13=function(bE){return bE==null?"null":"Some "+bD.prettyPrint(bE.$0);};}());
